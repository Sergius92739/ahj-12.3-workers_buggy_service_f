self.addEventListener("install",(e=>{e.waitUntil((async()=>{await self.skipWaiting()})()),console.log("service worker is installed")})),self.addEventListener("activate",(e=>{e.waitUntil((async()=>{await self.clients.claim()})()),console.log("service worker is activated")})),self.addEventListener("fetch",(e=>{new URL(e.request.url).pathname.startsWith("/news")&&e.respondWith((async()=>{const t=await caches.open("ahj-12.3-buggy_service"),s=(await self.clients.matchAll()).find((t=>t.id===e.clientId));try{const s=await fetch(e.request);if("OK"===s.statusText)return e.waitUntil(t.put(e.request,s.clone())),console.log(`Данные загружены из сервера. Статус ответа: ${s.status}.`),s;const a=await t.match(e.request);if(a)return console.log(`Данные загружены из кэша. Статус ответа: ${s.status}`),a}catch(e){return s.postMessage("error")}return s.postMessage("error")})())}));